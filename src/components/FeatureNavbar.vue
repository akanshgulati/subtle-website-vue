<template>
  <section id="feature-navbar">
    <ul class="flex flex-center flex-justify-center center">
      <li @click="scrollTo('wallpaper')" class="flex flex-center flex-justify-center" :class="{active: activeTab === 'wallpaper'}">
        <svg viewBox="0 0 21 21">
          <use xlink:href="#icon-wallpaper"></use>
        </svg>
        <p class="font-black">Wallpapers</p>
      </li>
      <li @click="scrollTo('todos')" class="flex flex-center flex-justify-center" :class="{active: activeTab === 'todos'}">
        <svg viewBox="0 0 512 512" class="fill">
          <use xlink:href="#icon-todos"></use>
        </svg>
        <p class="font-black">Todos</p>
      </li>
      <li @click="scrollTo('notes')" class="flex flex-center flex-justify-center" :class="{active: activeTab === 'notes'}">
        <svg viewBox="0 0 58.27 58.27" class="fill">
          <use xlink:href="#icon-notes"></use>
        </svg>
        <p class="font-black">Notes</p>
      </li>
      <li @click="scrollTo('weather')" class="flex flex-center flex-justify-center" :class="{active: activeTab === 'weather'}">
        <svg viewBox="0 0 21 21">
          <use xlink:href="#icon-weather"></use>
        </svg>
        <p class="font-black">Weather</p>
      </li>
      <li @click="scrollTo('dateTime')" class="flex flex-center flex-justify-center" :class="{active: activeTab === 'dateTime'}">
        <svg viewBox="0 0 21 21">
          <use xlink:href="#icon-clock"></use>
        </svg>
        <p class="font-black">Date & Time</p>
      </li>
      <li @click="scrollTo('customize')" class="flex flex-center flex-justify-center" :class="{active: activeTab === 'customize'}">
        <svg viewBox="0 0 100 100" class="fill">
          <use xlink:href="#icon-customize"></use>
        </svg>
        <p class="font-black">Customize</p>
      </li>
    </ul>
    <svg style="display: none;">
      <defs>

        <g id="icon-clock">
          <circle id="Oval" cx="10.5" cy="10.5" r="9.13133536"></circle>
          <polyline id="Shape" transform="translate(10.842248, 8.898166) rotate(-51.000000) translate(-10.842248, -8.898166) " points="6.49624149 8.22774104 9.10632618 11.3606903 15.1882544 6.43564197"></polyline>
        </g>
        <g id="icon-wallpaper">
          <polyline id="Shape" points="0.00857797986 14.8245426 5.23298105 8.6542509 11.1104345 15.595829"></polyline>
          <polyline id="Shape" points="8.11946374 11.4834513 14.158003 0.170099836 20.8539462 12.7060758"></polyline>
          <ellipse id="Oval" cx="6.9321391" cy="3.82227375" rx="1.95915115" ry="1.91656091"></ellipse>
        </g>
        <g id="icon-weather">
          <path d="M18.9567406,12.9043462 C18.9567406,13.9575538 18.1324913,14.826995 17.1176733,14.826995 L7.25454115,14.826995 C5.60604239,14.826995 4.29641646,13.4258931 4.29641646,11.7177447 C4.29641646,11.0004029 4.53261347,10.3403561 4.93009726,9.81375234 C5.47417955,9.08629676 6.3244414,8.61870636 7.28064838,8.61870636 C7.42397756,8.61870636 7.56569576,8.62292862 7.70419202,8.64487453 C8.00392768,7.38065228 8.77112968,6.30589152 9.80551621,5.63244155 C10.5401671,5.15139885 11.4116559,4.87479193 12.343414,4.87479193 C14.9806708,4.87479193 17.1178155,7.08936565 17.1178155,9.82204956 C17.1178155,10.2237531 17.072187,10.6137227 16.9842469,10.9884235 C17.028217,10.9850358 17.0722344,10.9919093 17.1178155,10.9919093 C18.1325387,10.9918602 18.9567406,11.8527587 18.9567406,12.9043462 Z"></path>
          <path d="M9.80542145,5.63278522 C8.77103491,6.30623519 8.00383292,7.38143781 7.70409726,8.64561097 C7.56564838,8.62366506 7.42393017,8.62027743 7.28055362,8.62027743 C6.32439401,8.62027743 5.47408479,9.089488 4.93000249,9.81699267 C3.83861596,9.2211635 3.09420449,8.03628039 3.09420449,6.6691038 C3.09420449,4.70609804 4.63031421,3.11445449 6.52472319,3.11445449 C8.07225187,3.11445449 9.37865586,4.17448644 9.80542145,5.63278522 Z"></path>
          <path d="M6.46,0 L6.46,1.86564838"></path>
          <path d="M0,6.69375 L1.80049875,6.69375"></path>
          <path d="M9.74268828,3.39602011 L11.065818,2.02501403"></path>
          <path d="M1.79016958,11.3939565 L3.11329925,10.0229504"></path>
          <path d="M1.79016958,2.02501403 L3.11329925,3.39602011"></path>
        </g>
        <g id="icon-customize">
          <path d="M86.139,41.691l-8.095-1.175c-0.276-0.762-0.539-1.506-0.864-2.219l4.987-6.622c1.406-1.882,1.123-4.653-0.673-6.448   l-5.846-5.854c-1.006-1.007-2.358-1.578-3.715-1.578c-1.006,0-1.947,0.32-2.73,0.904l-6.615,4.97   c-0.729-0.337-1.472-0.605-2.22-0.883l-1.179-7.984C58.85,12.447,56.68,11,54.141,11h-8.28c-2.539,0-4.709,1.447-5.048,3.803   l-1.18,7.96c-0.748,0.279-1.495,0.551-2.226,0.892l-6.611-4.96c-0.782-0.584-1.727-0.903-2.731-0.903   c-1.359,0-2.716,0.571-3.722,1.58l-5.856,5.852c-1.799,1.8-2.1,4.572-0.693,6.452l4.94,6.617c-0.337,0.728-0.665,1.473-0.941,2.225   l-7.928,1.175C11.567,42.023,10,44.147,10,46.741v8.276c0,2.594,1.565,4.719,3.862,5.051l8.097,1.176   c0.276,0.763,0.538,1.507,0.863,2.219l-4.987,6.622c-1.407,1.883-1.124,4.654,0.672,6.449l5.846,5.854   c1.005,1.008,2.356,1.582,3.713,1.582c1.006,0,1.951-0.313,2.733-0.896l6.614-4.954c0.728,0.337,1.473,0.635,2.221,0.913   l1.18,8.043C41.152,89.432,43.322,91,45.861,91h8.28c2.539,0,4.709-1.566,5.049-3.924l1.18-8.079   c0.742-0.276,1.488-0.548,2.227-0.892l6.611,4.959c0.779,0.584,1.725,0.903,2.73,0.903c1.358,0,2.717-0.571,3.724-1.579   l5.854-5.853c1.799-1.8,2.1-4.57,0.694-6.453l-4.94-6.615c0.34-0.733,0.666-1.479,0.941-2.225l7.93-1.175   C88.436,59.736,90,57.611,90,55.02v-8.277C90,44.147,88.436,42.023,86.139,41.691z M73.882,58.236   c-0.455,1.479-1.06,2.935-1.796,4.324l-0.749,1.407l6.683,8.925c-0.017,0.025-0.037,0.056-0.068,0.086l-5.854,5.856   c-0.027,0.028-0.056,0.052-0.08,0.067l-8.929-6.666l-1.407,0.75c-1.434,0.761-2.888,1.378-4.326,1.82l-1.523,0.488L54.236,86.68   C54.211,86.688,54.18,87,54.141,87h-8.28c-0.036,0-0.067-0.313-0.093-0.318l-1.596-11.3l-1.526-0.563   c-1.474-0.451-2.928-1.086-4.324-1.824l-1.409-0.764l-8.941,6.664c-0.021-0.015-0.043-0.037-0.066-0.06l-5.852-5.856   c-0.026-0.025-0.049-0.054-0.065-0.076l6.692-8.932l-0.76-1.412c-0.703-1.324-1.304-2.738-1.791-4.324l-0.514-1.521l-11.193-1.574   C14.419,55.104,14,55.063,14,55.02v-8.277c0-0.045,0.419-0.085,0.424-0.12l11.112-1.575l0.526-1.521   c0.456-1.482,1.09-2.938,1.825-4.325l0.762-1.408l-6.674-8.926c0.016-0.025,0.041-0.054,0.072-0.085l5.854-5.854   c0.028-0.028,0.058-0.049,0.083-0.066l8.929,6.671l1.409-0.744c1.436-0.762,2.89-1.363,4.324-1.804l1.524-0.457L45.765,15.2   c0.025-0.007,0.058-0.2,0.096-0.2h8.28c0.037,0,0.068,0.191,0.094,0.198l1.597,11.214l1.524,0.528   c1.486,0.457,2.94,1.092,4.324,1.827l1.409,0.761l8.94-6.665c0.02,0.016,0.043,0.037,0.066,0.061l5.85,5.854   c0.027,0.027,0.051,0.055,0.066,0.078l-6.689,8.932l0.758,1.411c0.693,1.311,1.313,2.765,1.791,4.325l0.516,1.521l11.189,1.575   C85.581,46.656,86,46.696,86,46.741v8.276c0,0.047-0.419,0.086-0.424,0.121l-11.111,1.574L73.882,58.236z"/>
          <g>
            <path d="M50.001,67.971c-9.61,0-17.428-7.82-17.428-17.43c0-9.61,7.818-17.429,17.428-17.429c9.608,0,17.429,7.818,17.429,17.429    C67.43,60.15,59.609,67.971,50.001,67.971z M50.001,37.187c-7.363,0-13.354,5.991-13.354,13.354    c0,7.363,5.991,13.354,13.354,13.354c7.362,0,13.354-5.988,13.354-13.354C63.354,43.178,57.363,37.187,50.001,37.187z"/>
          </g>
        </g>
        <g id="icon-notes">
          <path
            d="M56.261,35.724l-2.849-2.85c-1.128-1.127-3.094-1.127-4.222,0L33.799,48.265l-2.121,7.779l-0.519,0.519   c-0.388,0.388-0.389,1.014-0.006,1.405l-0.005,0.02l0.019-0.005c0.194,0.19,0.446,0.288,0.699,0.288   c0.256,0,0.512-0.098,0.707-0.293l0.52-0.52l7.778-2.121l15.39-15.391C57.425,38.781,57.425,36.888,56.261,35.724z M36.108,48.784   l10.243-10.243l4.243,4.243L40.351,53.027L36.108,48.784z M35.206,50.71l3.22,3.22l-4.428,1.208L35.206,50.71z M54.847,38.531   l-2.839,2.839l-4.243-4.243l2.839-2.839c0.372-0.373,1.021-0.373,1.393,0l2.85,2.85C55.231,37.521,55.231,38.147,54.847,38.531z"/>
          <path d="M8.135,36h26c0.552,0,1-0.447,1-1s-0.448-1-1-1h-26c-0.552,0-1,0.447-1,1S7.583,36,8.135,36z"/>
          <path d="M30.135,40h-22c-0.552,0-1,0.447-1,1s0.448,1,1,1h22c0.552,0,1-0.447,1-1S30.688,40,30.135,40z"/>
          <path d="M8.135,18h13c0.552,0,1-0.447,1-1s-0.448-1-1-1h-13c-0.552,0-1,0.447-1,1S7.583,18,8.135,18z"/>
          <path d="M21.135,48c0.552,0,1-0.447,1-1s-0.448-1-1-1h-13c-0.552,0-1,0.447-1,1s0.448,1,1,1H21.135z"/>
          <path d="M37.135,22h-29c-0.552,0-1,0.447-1,1s0.448,1,1,1h29c0.552,0,1-0.447,1-1S37.688,22,37.135,22z"/>
          <path d="M8.135,30h14c0.552,0,1-0.447,1-1s-0.448-1-1-1h-14c-0.552,0-1,0.447-1,1S7.583,30,8.135,30z"/>
          <path
            d="M38.135,29c0-0.553-0.448-1-1-1h-7c-0.552,0-1,0.447-1,1s0.448,1,1,1h7C37.688,30,38.135,29.553,38.135,29z"/>
          <path
            d="M26.845,29.709c0.18-0.189,0.29-0.45,0.29-0.71s-0.11-0.52-0.29-0.71c-0.38-0.37-1.05-0.37-1.42,0   c-0.18,0.19-0.29,0.45-0.29,0.71c0,0.271,0.11,0.521,0.29,0.71c0.19,0.181,0.45,0.29,0.71,0.29   C26.395,29.999,26.656,29.89,26.845,29.709z"/>
          <path
            d="M26.135,56h-23V8h7v2c0,0.553,0.448,1,1,1h23c0.552,0,1-0.447,1-1V8h7v22c0,0.553,0.448,1,1,1s1-0.447,1-1V7   c0-0.553-0.448-1-1-1h-8V4c0-0.553-0.448-1-1-1h-6V1c0-0.553-0.448-1-1-1h-9c-0.552,0-1,0.447-1,1v2h-6c-0.552,0-1,0.447-1,1v2h-8   c-0.552,0-1,0.447-1,1v50c0,0.553,0.448,1,1,1h24c0.552,0,1-0.447,1-1S26.688,56,26.135,56z M19.135,2h7v2v2h-7V4V2z M12.135,5h5v2   c0,0.553,0.448,1,1,1h9c0.552,0,1-0.447,1-1V5h5v2v2h-21V7V5z"/>
        </g>
        <g id="icon-todos">
          <path
            d="M370,95.4V53.9h-62.2V12.5H204.2v41.5H142v41.5H69.5v404.1h373.1V95.4H370z M224.9,33.2h62.2v20.7h-62.2V33.2z M162.7,74.7h186.5v62.2H162.7V74.7z M421.8,478.8H90.2V116.1H142v41.4h228v-41.4h51.8V478.8z"/>
          <rect width="20.7" x="131.6" y="222.8" height="20.7"/>
          <rect width="20.7" x="131.6" y="307.8" height="20.7"/>
          <rect width="20.7" x="131.6" y="393.8" height="20.7"/>
          <rect width="207.3" x="173.1" y="222.8" height="20.7"/>
          <rect width="207.3" x="173.1" y="307.8" height="20.7"/>
          <rect width="207.3" x="173.1" y="393.8" height="20.7"/>
        </g>
      </defs>
    </svg>
  </section>
</template>
<script>
  export default {
    data() {
      return {
        activeTab: 'wallpaper'
      }
    },
    methods: {
      scrollTo(element) {
        this.$ga.event('website', 'FeatureNavbar', 'clicked-'+ element);
        const featureBarHeight = document.querySelector('#feature-navbar').offsetHeight;
        const offsetTop = document.querySelector('#'+element).offsetTop - featureBarHeight;
        window.scroll({
          left: 0,
          top: offsetTop,
          behavior: 'smooth'
        });
        this.activeTab = element;
      },
      checkActiveElement() {
        const sections = document.querySelectorAll('.feature-section')
        const windowHalf = (window.innerHeight / 2)
        const self = this;
        window.onscroll = () => {
          let cur_pos = window.pageYOffset + windowHalf;
          sections.forEach(function (section) {
            let top = section.offsetTop
            if (cur_pos >= top) {
              self.activeTab = section.id
            }
          })
        }
      }
    },
    mounted(){
      this.checkActiveElement();
    }
  }
</script>
<style scoped>
  #feature-navbar {
    padding: 0;
    top: 64px;
    position: sticky;
    background: white;
    box-shadow: 0 2px 2px -2px rgba(0,0,0,.2);
  }
  svg {
    margin-right: 0.5rem;
    height: 2rem;
    width: 2rem;
    fill: none;
    stroke: #333;
    transition: all 0.2s ease-in;
  }
  svg.fill {
    fill: #333;
    stroke: none;
  }
  ul li{
    margin: 0 0.5rem;
    flex-grow: 1;
    border-bottom: 3px solid rgba(62, 170, 255, 0);
    transition: all 0.2s ease-in;
    cursor: pointer;
    max-width: 200px;
    padding: 1rem 0 0.5rem;
  }

  ul li:hover, ul li.active {
    border-bottom: 3px solid rgb(49, 153, 230);
  }

  ul li:hover svg, ul li.active svg {
    stroke: rgb(49, 153, 230);
  }
  ul li:hover svg.fill, ul li.active svg.fill {
    fill: rgb(49, 153, 230);
    stroke: none;
  }
  ul li p {
    transition: all 0.2s ease-in;
    margin-bottom: 0;
    margin-top: 0;
  }
  ul li:hover p, ul li.active p {
    color: rgb(49, 153, 230);
  }
</style>
